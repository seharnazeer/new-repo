import{r as h,j as e,M as $,n as U,o as V,P as F,s as A,h as T,i as W,p as G}from"./index-BslSUhme.js";import{L as oe,i as le}from"./Layout-Dgx98Ny1.js";import{T as X}from"./Buttons-BvFcsby5.js";function ce(){var J,K,Q;const Y=localStorage.getItem("userId"),[m,q]=h.useState("Profile"),[L,d]=h.useState(!1);h.useState(!1);const[z,Z]=h.useState(!1),[M,ee]=h.useState(!1),[O,H]=h.useState(),[i,ae]=h.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[n,_]=h.useState({id:"",name:"",email:"",phone:"",password:""}),E=a=>{_({...n,[a.target.name]:a.target.value})},R=a=>{ae({...i,[a.target.name]:a.target.value})},te=async()=>{var r,c,l;d(!0);let a=await F("admin/udpateProfile",{id:n==null?void 0:n.id,name:n==null?void 0:n.name,email:n==null?void 0:n.email,password:n==null?void 0:n.password});((r=a==null?void 0:a.data)==null?void 0:r.status)==="1"?(I(),A((c=a==null?void 0:a.data)==null?void 0:c.message),d(!1)):(T((l=a==null?void 0:a.data)==null?void 0:l.message),d(!1))},se=async()=>{var a,r,c;if((i==null?void 0:i.newPassword)!==(i==null?void 0:i.confirmPassword))W("New Password does not match with Confirm Password");else{d(!0);let l=await F("admin/udpatePassword",{id:Y,password:i==null?void 0:i.newPassword,confirmPassword:i==null?void 0:i.confirmPassword});((a=l==null?void 0:l.data)==null?void 0:a.status)==="1"?(I(),A((r=l==null?void 0:l.data)==null?void 0:r.message),d(!1)):(T((c=l==null?void 0:l.data)==null?void 0:c.message),d(!1))}},ne=async(a,r)=>{var l,u,x,f,g,p;if(d(!0),parseInt(r)===1){let o=await F("admin/changeSetting",{id:a,value:0});((l=o==null?void 0:o.data)==null?void 0:l.status)==="1"?(d(!1),A((u=o==null?void 0:o.data)==null?void 0:u.message),I()):(d(!1),T((x=o==null?void 0:o.data)==null?void 0:x.message))}else{let o=await F("admin/changeSetting",{id:a,value:1});((f=o==null?void 0:o.data)==null?void 0:f.status)==="1"?(d(!1),A((g=o==null?void 0:o.data)==null?void 0:g.message),I()):(d(!1),T((p=o==null?void 0:o.data)==null?void 0:p.message))}};h.useEffect(()=>{(async()=>{var c,l,u,x,f,g,p,o,y,w,b,j,N,v,P,k,C,S,B,D,t;const r={headers:{accessToken:localStorage.getItem("accessToken")}};try{let s;m==="Profile"?(d(!0),s=await G.get(`https://shippinghack.myace.app/admin/getProfile/${localStorage.getItem("userId")}`,r),d(!1),_({id:(u=(l=(c=s==null?void 0:s.data)==null?void 0:c.data)==null?void 0:l.userData)==null?void 0:u.id,name:(g=(f=(x=s==null?void 0:s.data)==null?void 0:x.data)==null?void 0:f.userData)==null?void 0:g.name,email:(y=(o=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:o.userData)==null?void 0:y.email,phone:(j=(b=(w=s==null?void 0:s.data)==null?void 0:w.data)==null?void 0:b.userData)==null?void 0:j.phone,address:(P=(v=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:v.userData)==null?void 0:P.address,city:(S=(C=(k=s==null?void 0:s.data)==null?void 0:k.data)==null?void 0:C.userData)==null?void 0:S.city,country:(t=(D=(B=s==null?void 0:s.data)==null?void 0:B.data)==null?void 0:D.userData)==null?void 0:t.country})):m==="Preferences"&&(d(!0),s=await G.get("https://fominobackend.myace.app/admin/getSettings",r),d(!1),H(s))}catch(s){console.error("Error in request:",s)}})()},[m]);const I=async()=>{var r,c,l,u,x,f,g,p,o,y,w,b,j,N,v,P,k,C,S,B,D;var a={headers:{accessToken:localStorage.getItem("accessToken")}};try{let t;m==="Profile"?(t=await G.get(`https://shippinghack.myace.app/admin/getProfile/${localStorage.getItem("userId")}`,a),_({id:(l=(c=(r=t==null?void 0:t.data)==null?void 0:r.data)==null?void 0:c.userData)==null?void 0:l.id,name:(f=(x=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:x.userData)==null?void 0:f.name,email:(o=(p=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:p.userData)==null?void 0:o.email,phone:(b=(w=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:w.userData)==null?void 0:b.phone,address:(v=(N=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:N.userData)==null?void 0:v.address,city:(C=(k=(P=t==null?void 0:t.data)==null?void 0:P.data)==null?void 0:k.userData)==null?void 0:C.city,country:(D=(B=(S=t==null?void 0:t.data)==null?void 0:S.data)==null?void 0:B.userData)==null?void 0:D.country})):m==="Preferences"&&(t=await G.get("https://fominobackend.myace.app/admin/getSettings",a),H(t))}catch(t){W(t)}};return e.jsx(oe,{content:e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsx("div",{className:"flex justify-between items-center flex-wrap gap-5",children:e.jsx("h2",{className:"text-themeDarkBlue text-2xl font-bold font-poppins",children:"Settings"})}),e.jsx("div",{className:"py-5 space-y-1.5",children:e.jsxs("ul",{className:"flex flex-wrap items-center gap-8",children:[e.jsx(X,{title:"Profile",tab:m,onClick:()=>q("Profile")}),e.jsx(X,{title:"Change Password",tab:m,onClick:()=>q("Change Password")})]})}),m==="Profile"?e.jsx("div",{className:"bg-white rounded-lg p-5 space-y-5",children:L?e.jsx("div",{className:"h-[360px]",children:e.jsx($,{})}):e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("label",{htmlFor:"name",className:"text-themeBlack font-medium font-manrope",children:"Name"}),e.jsx("input",{value:n==null?void 0:n.name,type:"text",name:"name",placeholder:"Enter Name",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:E})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-themeBlack font-medium font-manrope",children:"Email"}),e.jsx("input",{value:n==null?void 0:n.email,type:"email",name:"email",placeholder:"Enter Email",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:E})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("label",{htmlFor:"number",className:"text-themeBlack font-medium font-manrope",children:"Mobile number"}),e.jsx("input",{value:n==null?void 0:n.phone,type:"number",name:"number",placeholder:"Enter Number",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:E})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-themeBlack font-medium font-manrope",children:"Password"}),e.jsx("input",{value:n==null?void 0:n.address,type:"password",name:"password",placeholder:"Enter address",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:E})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 col-span-2",children:[e.jsx("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:()=>window.history.back(),children:"Cancel"}),e.jsx("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                 text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:te,children:"Save"})]})]})}):m==="Preferences"?e.jsx("div",{className:"bg-white rounded-lg p-5 space-y-5",children:L?e.jsx("div",{className:"h-[360px]",children:e.jsx($,{})}):e.jsx("div",{className:"grid grid-cols-1 gap-5",children:(Q=(K=(J=O==null?void 0:O.data)==null?void 0:J.data)==null?void 0:K.data)==null?void 0:Q.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between border-[1.5px] rounded-lg p-2.5 gap-y-2 border-[#EBEDF0]",children:[e.jsxs("label",{htmlFor:"email",className:"text-themeBlack font-medium font-manrope flex flex-col",children:[e.jsx("span",{className:"font-semibold text-lg",children:(a==null?void 0:a.key)==="emailNotification"?"Email notification":(a==null?void 0:a.key)==="newsLetter"?"Neweletters":"Automated reports"}),e.jsx("span",{className:"text-[#767C8C]",children:(a==null?void 0:a.key)==="emailNotification"?"Allow to receive email notification":(a==null?void 0:a.key)==="newsLetter"?"Allow to stay updated and receive neweletter":"Allow to send us report automatically incase of any issue"})]}),e.jsx("div",{children:e.jsx(le,{onChange:()=>{ne(a==null?void 0:a.id,a==null?void 0:a.value)},checked:(a==null?void 0:a.value)==="1",uncheckedIcon:!1,checkedIcon:!1,onColor:"#C40C34",onHandleColor:"#fff",className:"react-switch",boxShadow:"none",width:48})})]}))})}):e.jsx("div",{className:"bg-white rounded-lg p-5 space-y-5",children:L?e.jsx("div",{className:"h-[360px]",children:e.jsx($,{})}):e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-y-2 relative",children:[e.jsx("label",{htmlFor:"newPassword",className:"text-themeBlack font-medium font-manrope",children:"New password"}),e.jsx("input",{type:z?"text":"password",name:"newPassword",placeholder:"Enter New Password",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope",onChange:R}),e.jsx("button",{onClick:()=>Z(!z),type:"button",className:"text-themeBlack absolute right-4 top-10",children:z?e.jsx(U,{size:24}):e.jsx(V,{size:24})})]}),e.jsxs("div",{className:"flex flex-col gap-y-2 relative",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-themeBlack font-medium font-manrope",children:"Confirm Password"}),e.jsx("input",{type:M?"text":"password",name:"confirmPassword",placeholder:"Enter Confirm Password",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope",onChange:R}),e.jsx("button",{onClick:()=>ee(!M),type:"button",className:"text-themeBlack absolute right-4 top-10",children:M?e.jsx(U,{size:24}):e.jsx(V,{size:24})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 col-span-2",children:[e.jsx("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,children:"Cancel"}),e.jsx("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                 text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:se,children:"Save"})]})]})})]})})}export{ce as default};
