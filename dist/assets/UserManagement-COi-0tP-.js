import{r as b,j as s,L as w,P as p,s as g,h as j}from"./index-BslSUhme.js";import{i as A,L as D}from"./Layout-Dgx98Ny1.js";import{H as S}from"./Helment-BToLr-D6.js";import{A as u}from"./Buttons-BvFcsby5.js";import{M}from"./MyDataTable-B3MvzPxQ.js";import{G as k}from"./GetAPI-BQpBpOP0.js";import{d as E}from"./dayjs.min-BtVHOpGs.js";function R(){var m;const{data:n,reFetch:c}=k("admin/getAllUsers");console.log("ðŸš€ ~ Property ~ data:",n);const[i,y]=b.useState(""),C=()=>{var r,o;return(o=(r=n==null?void 0:n.data)==null?void 0:r.userData)==null?void 0:o.filter(a=>i===""||(a==null?void 0:a.id)&&(a==null?void 0:a.id.toString().includes(i.toLowerCase()))||(a==null?void 0:a.name)&&(a==null?void 0:a.name.toLowerCase().includes(i.toLowerCase())))},L=async(e,r)=>{var o,a,f,h,l,x;if(r===!0){let t=await p("admin/userChangeStatus",{userId:e,status:!1});((o=t==null?void 0:t.data)==null?void 0:o.status)==="1"?(g((a=t==null?void 0:t.data)==null?void 0:a.message),c()):j((f=t==null?void 0:t.data)==null?void 0:f.message)}else{let t=await p("admin/userChangeStatus",{userId:e,status:!0});((h=t==null?void 0:t.data)==null?void 0:h.status)==="1"?(g((l=t==null?void 0:t.data)==null?void 0:l.message),c()):j((x=t==null?void 0:t.data)==null?void 0:x.message)}},N=[{field:"id",header:"User Id"},{field:"name",header:"Name"},{field:"email",header:"Email"},{field:"type",header:"Charger type"},{field:"logIn",header:"Last Logged in"},{field:"status",header:"Status"},{field:"action",header:"Action"}],d=[];return(m=C())==null||m.map((e,r)=>d.push({id:e==null?void 0:e.id,name:e==null?void 0:e.name,email:e==null?void 0:e.email,type:"EVDC-120KW",logIn:E(e==null?void 0:e.lastLogin).format("DD MMM, YYYY h:mm a"),status:s.jsx("div",{children:e!=null&&e.status?s.jsx("div",{className:`bg-[#21965314] text-themeGreen font-semibold p-2 rounded-md flex 
              justify-center`,children:"Active"}):s.jsx("div",{className:`bg-[#EE4A4A14] text-themeRed font-semibold p-2 rounded-md flex 
              justify-center`,children:"Block"})}),action:s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("label",{children:s.jsx(A,{onChange:()=>{L(e==null?void 0:e.id,e==null?void 0:e.status)},checked:e==null?void 0:e.status,uncheckedIcon:!1,checkedIcon:!1,onColor:"#139013",onHandleColor:"#fff",className:"react-switch",boxShadow:"none"})})})})),(n==null?void 0:n.length)===0?s.jsx(w,{}):s.jsx(D,{content:s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5",children:[s.jsx("h2",{className:"text-themeDarkBlue text-2xl font-bold font-poppins",children:"User Management"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(u,{text:"Message user",onClick:()=>navigate("/add-user")})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(S,{search:!0,searchOnChange:e=>y(e.target.value),searchValue:i}),s.jsx(M,{columns:N,data:d})]})]})})}export{R as default};
